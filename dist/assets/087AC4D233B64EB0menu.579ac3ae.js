/*! 
 Build based on gin-vue-admin 
 Time : 1717039643000 */
import{_ as e,a as l,r as a,o as t,c as o,b as u,d as i,w as d,i as n,t as s,g as m,p,h as r,D as v,aY as c,aZ as f,P as h,a_ as b,E as y,a$ as w,b0 as B,b1 as g,k as _,q as V,j as D,s as C,v as k}from"./087AC4D233B64EB0index.39f1eb31.js";import{E}from"./087AC4D233B64EB0drawer.ae3d541f.js";import"./087AC4D233B64EB0overlay.3905897c.js";import{a as A,E as j}from"./087AC4D233B64EB0form-item.a86c41d2.js";/* empty css                                *//* empty css                               */import{E as x}from"./087AC4D233B64EB0radio.6c10d629.js";/* empty css                              */import"./087AC4D233B64EB0tag.d3c1c3e4.js";import{E as I}from"./087AC4D233B64EB0checkbox.a3853383.js";import"./087AC4D233B64EB0scrollbar.3894915f.js";import{E as U,a as z}from"./087AC4D233B64EB0select.7f5b5538.js";import{E as q,a as N}from"./087AC4D233B64EB0table-column.e9b4a870.js";/* empty css                               */import T from"./087AC4D233B64EB0icon.db147468.js";import{_ as M}from"./087AC4D233B64EB0warningBar.beb718a3.js";import{c as S}from"./087AC4D233B64EB0authorityBtn.0890d580.js";import{E as P}from"./087AC4D233B64EB0index.d8bfc0de.js";import"./087AC4D233B64EB0isUndefined.d281c39a.js";import"./087AC4D233B64EB0castArray.209ac14b.js";import"./087AC4D233B64EB0_baseClone.a73122b0.js";import"./087AC4D233B64EB0_Uint8Array.02b83471.js";import"./087AC4D233B64EB0_initCloneObject.0c0ca3ea.js";import"./087AC4D233B64EB0index.8fd65b4f.js";import"./087AC4D233B64EB0strings.2df7e9e1.js";import"./087AC4D233B64EB0isEqual.e024b3a6.js";import"./087AC4D233B64EB0cloneDeep.5b0b6a51.js";import"./087AC4D233B64EB0index.5d58b83c.js";import"./087AC4D233B64EB0debounce.0aab18a9.js";import"./087AC4D233B64EB0hasIn.9f12b2a1.js";const $=e=>(C("data-v-0bef0e3f"),e=e(),k(),e),F={class:"gva-table-box"},H={class:"gva-btn-list"},O={key:0,class:"icon-column"},J={class:"flex items-center justify-between"},K={class:"text-lg"},Y={style:{display:"inline-flex","align-items":"center"}},Z=$((()=>u("span",null,"路由Path",-1))),G=$((()=>u("span",{style:{"font-size":"12px","margin-right":"12px"}},"如果菜单包含子菜单，请创建router-view二级路由页面或者",-1))),L=$((()=>u("span",null," 高亮菜单 ",-1))),Q=$((()=>u("span",null," 是否为基础页面 ",-1))),R={class:"flex items-center gap-2 mt-2"},W={class:"flex items-center gap-2 mt-3"},X=e(Object.assign({name:"Menus"},{__name:"menu",setup(e){const C=l({path:[{required:!0,message:"请输入菜单name",trigger:"blur"}],component:[{required:!0,message:"请输入文件路径",trigger:"blur"}],"meta.title":[{required:!0,message:"请输入菜单展示名称",trigger:"blur"}]}),k=a(1),$=a(0),X=a(999),ee=a([]),le=a({}),ae=async()=>{const e=await f({page:k.value,pageSize:X.value,...le.value});0===e.code&&(ee.value=e.data.list,$.value=e.data.total,k.value=e.data.page,X.value=e.data.pageSize)};ae();const te=()=>{oe.value.component=oe.value.component.replace(/\\/g,"/")},oe=a({ID:0,path:"",name:"",hidden:!1,parentId:"",component:"",meta:{activeName:"",title:"",icon:"",defaultMenu:!1,closeTab:!1,keepAlive:!1},parameters:[],menuBtn:[]}),ue=()=>{oe.value.path=oe.value.name},ie=e=>{se(),e()},de=a(null),ne=a(!1),se=()=>{ne.value=!1,de.value.resetFields(),oe.value={ID:0,path:"",name:"",hidden:!1,parentId:"",component:"",meta:{title:"",icon:"",defaultMenu:!1,closeTab:!1,keepAlive:!1}}},me=a(!1),pe=()=>{se(),me.value=!1},re=async()=>{de.value.validate((async e=>{if(e){let e;e=he.value?await w(oe.value):await B(oe.value),0===e.code&&(y({type:"success",message:he.value?"编辑成功":"添加成功!"}),ae()),se(),me.value=!1}}))},ve=a([{ID:"0",title:"根菜单"}]),ce=()=>{ve.value=[{ID:"0",title:"根目录"}],fe(ee.value,ve.value,!1)},fe=(e,l,a)=>{e&&e.forEach((e=>{if(e.children&&e.children.length){const t={title:e.meta.title,ID:String(e.ID),disabled:a||e.ID===oe.value.ID,children:[]};fe(e.children,t.children,a||e.ID===oe.value.ID),l.push(t)}else{const t={title:e.meta.title,ID:String(e.ID),disabled:a||e.ID===oe.value.ID};l.push(t)}}))},he=a(!1),be=a("新增菜单"),ye=e=>{be.value="新增菜单",oe.value.parentId=String(e),he.value=!1,ce(),me.value=!0};return(e,l)=>{const a=_,f=q,w=V,B=N,$=D,X=A,le=I,se=U,fe=z,we=x,Be=P,ge=j,_e=E;return t(),o("div",null,[u("div",F,[u("div",H,[i(a,{type:"primary",icon:"plus",size:"small",onClick:l[0]||(l[0]=e=>ye("0"))},{default:d((()=>[n("新增根菜单")])),_:1})]),i(B,{data:ee.value,"row-key":"ID",size:"small",stripe:!0},{default:d((()=>[i(f,{align:"left",label:"ID","min-width":"100",prop:"ID"}),i(f,{align:"left",label:"展示名称","min-width":"120",prop:"authorityName"},{default:d((e=>[u("span",null,s(e.row.meta.title),1)])),_:1}),i(f,{align:"left",label:"图标","min-width":"140",prop:"authorityName"},{default:d((e=>[e.row.meta.icon?(t(),o("div",O,[i(w,null,{default:d((()=>[(t(),m(p(e.row.meta.icon)))])),_:2},1024),u("span",null,s(e.row.meta.icon),1)])):r("",!0)])),_:1}),i(f,{align:"left",label:"路由Name","show-overflow-tooltip":"","min-width":"160",prop:"name"}),i(f,{align:"left",label:"路由Path","show-overflow-tooltip":"","min-width":"160",prop:"path"}),i(f,{align:"left",label:"是否隐藏","min-width":"100",prop:"hidden"},{default:d((e=>[u("span",null,s(e.row.hidden?"隐藏":"显示"),1)])),_:1}),i(f,{align:"left",label:"父节点","min-width":"90",prop:"parentId"}),i(f,{align:"left",label:"排序","min-width":"70",prop:"sort"}),i(f,{align:"left",label:"文件路径","min-width":"360",prop:"component"}),i(f,{align:"left",fixed:"right",label:"操作",width:"300"},{default:d((e=>[i(a,{type:"primary",link:"",icon:"plus",size:"small",onClick:l=>ye(e.row.ID)},{default:d((()=>[n("添加子菜单")])),_:2},1032,["onClick"]),i(a,{type:"primary",link:"",icon:"edit",size:"small",onClick:l=>(async e=>{be.value="编辑菜单";const l=await g({id:e});oe.value=l.data.menu,he.value=!0,ce(),me.value=!0})(e.row.ID)},{default:d((()=>[n("编辑")])),_:2},1032,["onClick"]),i(a,{type:"primary",link:"",icon:"delete",size:"small",onClick:l=>{return a=e.row.ID,void h.confirm("此操作将永久删除所有角色下该菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await b({ID:a})).code&&(y({type:"success",message:"删除成功!"}),1===ee.value.length&&k.value>1&&k.value--,ae())})).catch((()=>{y({type:"info",message:"已取消删除"})}));var a}},{default:d((()=>[n("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),i(_e,{modelValue:me.value,"onUpdate:modelValue":l[16]||(l[16]=e=>me.value=e),size:"60%","before-close":ie,"show-close":!1},{header:d((()=>[u("div",J,[u("span",K,s(be.value),1),u("div",null,[i(a,{size:"small",onClick:pe},{default:d((()=>[n("取 消")])),_:1}),i(a,{size:"small",type:"primary",onClick:re},{default:d((()=>[n("确 定")])),_:1})])])])),default:d((()=>[i(M,{title:"新增菜单，需要在角色管理内配置权限才可使用"}),me.value?(t(),m(ge,{key:0,ref_key:"menuForm",ref:de,inline:!0,model:oe.value,rules:C,"label-position":"top","label-width":"85px"},{default:d((()=>[i(X,{label:"路由Name",prop:"path",style:{width:"30%"}},{default:d((()=>[i($,{modelValue:oe.value.name,"onUpdate:modelValue":l[1]||(l[1]=e=>oe.value.name=e),autocomplete:"off",placeholder:"唯一英文字符串",onChange:ue},null,8,["modelValue"])])),_:1}),i(X,{prop:"path",style:{width:"30%"}},{label:d((()=>[u("span",Y,[Z,i(le,{modelValue:ne.value,"onUpdate:modelValue":l[2]||(l[2]=e=>ne.value=e),style:{"margin-left":"12px",height:"auto"}},{default:d((()=>[n("添加参数")])),_:1},8,["modelValue"])])])),default:d((()=>[i($,{modelValue:oe.value.path,"onUpdate:modelValue":l[3]||(l[3]=e=>oe.value.path=e),disabled:!ne.value,autocomplete:"off",placeholder:"建议只在后方拼接参数"},null,8,["modelValue","disabled"])])),_:1}),i(X,{label:"是否隐藏",style:{width:"30%"}},{default:d((()=>[i(fe,{modelValue:oe.value.hidden,"onUpdate:modelValue":l[4]||(l[4]=e=>oe.value.hidden=e),placeholder:"是否在列表隐藏"},{default:d((()=>[i(se,{value:!1,label:"否"}),i(se,{value:!0,label:"是"})])),_:1},8,["modelValue"])])),_:1}),i(X,{label:"父节点ID",style:{width:"30%"}},{default:d((()=>[i(we,{modelValue:oe.value.parentId,"onUpdate:modelValue":l[5]||(l[5]=e=>oe.value.parentId=e),style:{width:"100%"},disabled:!he.value,options:ve.value,props:{checkStrictly:!0,label:"title",value:"ID",disabled:"disabled",emitPath:!1},"show-all-levels":!1,filterable:""},null,8,["modelValue","disabled","options"])])),_:1}),i(X,{label:"文件路径",prop:"component",style:{width:"60%"}},{default:d((()=>[i($,{modelValue:oe.value.component,"onUpdate:modelValue":l[6]||(l[6]=e=>oe.value.component=e),autocomplete:"off",placeholder:"页面:view/xxx/xx.vue 插件:plugin/xx/xx.vue",onBlur:te},null,8,["modelValue"]),G,i(a,{style:{"margin-top":"4px"},size:"small",onClick:l[7]||(l[7]=e=>oe.value.component="view/routerHolder.vue")},{default:d((()=>[n("点我设置")])),_:1})])),_:1}),i(X,{label:"展示名称",prop:"meta.title",style:{width:"30%"}},{default:d((()=>[i($,{modelValue:oe.value.meta.title,"onUpdate:modelValue":l[8]||(l[8]=e=>oe.value.meta.title=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(X,{label:"图标",prop:"meta.icon",style:{width:"30%"}},{default:d((()=>[i(T,{meta:oe.value.meta,style:{width:"100%"}},null,8,["meta"])])),_:1}),i(X,{label:"排序标记",prop:"sort",style:{width:"30%"}},{default:d((()=>[i($,{modelValue:oe.value.sort,"onUpdate:modelValue":l[9]||(l[9]=e=>oe.value.sort=e),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(X,{prop:"meta.activeName",style:{width:"30%"}},{label:d((()=>[u("div",null,[L,i(Be,{content:"注：当到达此路由时候，指定左侧菜单指定name会处于活跃状态（亮起），可为空，为空则为本路由Name。",placement:"top",effect:"light"},{default:d((()=>[i(w,null,{default:d((()=>[i(v(c))])),_:1})])),_:1})])])),default:d((()=>[i($,{modelValue:oe.value.meta.activeName,"onUpdate:modelValue":l[10]||(l[10]=e=>oe.value.meta.activeName=e),placeholder:oe.value.name,autocomplete:"off"},null,8,["modelValue","placeholder"])])),_:1}),i(X,{label:"KeepAlive",prop:"meta.keepAlive",style:{width:"30%"}},{default:d((()=>[i(fe,{modelValue:oe.value.meta.keepAlive,"onUpdate:modelValue":l[11]||(l[11]=e=>oe.value.meta.keepAlive=e),style:{width:"100%"},placeholder:"是否keepAlive缓存页面"},{default:d((()=>[i(se,{value:!1,label:"否"}),i(se,{value:!0,label:"是"})])),_:1},8,["modelValue"])])),_:1}),i(X,{label:"CloseTab",prop:"meta.closeTab",style:{width:"30%"}},{default:d((()=>[i(fe,{modelValue:oe.value.meta.closeTab,"onUpdate:modelValue":l[12]||(l[12]=e=>oe.value.meta.closeTab=e),style:{width:"100%"},placeholder:"是否自动关闭tab"},{default:d((()=>[i(se,{value:!1,label:"否"}),i(se,{value:!0,label:"是"})])),_:1},8,["modelValue"])])),_:1}),i(X,{style:{width:"30%"}},{label:d((()=>[u("div",null,[Q,i(Be,{content:"此项选择为是，则不会展示左侧菜单以及顶部信息。",placement:"top",effect:"light"},{default:d((()=>[i(w,null,{default:d((()=>[i(v(c))])),_:1})])),_:1})])])),default:d((()=>[i(fe,{modelValue:oe.value.meta.defaultMenu,"onUpdate:modelValue":l[13]||(l[13]=e=>oe.value.meta.defaultMenu=e),style:{width:"100%"},placeholder:"是否为基础页面"},{default:d((()=>[i(se,{value:!1,label:"否"}),i(se,{value:!0,label:"是"})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])):r("",!0),u("div",null,[u("div",R,[i(a,{type:"primary",icon:"edit",size:"small",onClick:l[14]||(l[14]=e=>{return(l=oe.value).parameters||(l.parameters=[]),void l.parameters.push({type:"query",key:"",value:""});var l})},{default:d((()=>[n("新增菜单参数")])),_:1})]),i(B,{data:oe.value.parameters,style:{width:"100%","margin-top":"12px"}},{default:d((()=>[i(f,{align:"left",prop:"type",label:"参数类型",width:"180"},{default:d((e=>[i(fe,{modelValue:e.row.type,"onUpdate:modelValue":l=>e.row.type=l,placeholder:"请选择"},{default:d((()=>[i(se,{key:"query",value:"query",label:"query"}),i(se,{key:"params",value:"params",label:"params"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),i(f,{align:"left",prop:"key",label:"参数key",width:"180"},{default:d((e=>[u("div",null,[i($,{modelValue:e.row.key,"onUpdate:modelValue":l=>e.row.key=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),i(f,{align:"left",prop:"value",label:"参数值"},{default:d((e=>[u("div",null,[i($,{modelValue:e.row.value,"onUpdate:modelValue":l=>e.row.value=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),i(f,{align:"left"},{default:d((e=>[u("div",null,[i(a,{type:"danger",size:"small",icon:"delete",onClick:l=>{return a=oe.value.parameters,t=e.$index,void a.splice(t,1);var a,t}},{default:d((()=>[n("删除")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),u("div",W,[i(a,{type:"primary",icon:"edit",size:"small",onClick:l[15]||(l[15]=e=>{return(l=oe.value).menuBtn||(l.menuBtn=[]),void l.menuBtn.push({name:"",desc:""});var l})},{default:d((()=>[n("新增可控按钮 ")])),_:1})]),i(B,{data:oe.value.menuBtn,style:{width:"100%","margin-top":"12px"}},{default:d((()=>[i(f,{align:"left",prop:"name",label:"按钮名称",width:"180"},{default:d((e=>[u("div",null,[i($,{modelValue:e.row.name,"onUpdate:modelValue":l=>e.row.name=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),i(f,{align:"left",prop:"name",label:"备注",width:"180"},{default:d((e=>[u("div",null,[i($,{modelValue:e.row.desc,"onUpdate:modelValue":l=>e.row.desc=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),i(f,{align:"left"},{default:d((e=>[u("div",null,[i(a,{type:"danger",size:"small",icon:"delete",onClick:l=>(async(e,l)=>{const a=e[l];if(0===a.ID)return void e.splice(l,1);0===(await S({id:a.ID})).code&&e.splice(l,1)})(oe.value.menuBtn,e.$index)},{default:d((()=>[n("删除")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"])])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-0bef0e3f"]]);export{X as default};
