/*! 
 Build based on gin-vue-admin 
 Time : 1717039643000 */
import{K as e,r as a,o as t,c as l,d as o,b as s,w as r,i,t as u,D as m,P as n,E as p,k as c,j as d}from"./087AC4D233B64EB0index.39f1eb31.js";import{E as B}from"./087AC4D233B64EB0dialog.c75a9340.js";import"./087AC4D233B64EB0overlay.3905897c.js";import{a as v,E as C}from"./087AC4D233B64EB0form-item.a86c41d2.js";/* empty css                              */import{E as f}from"./087AC4D233B64EB0pagination.ce43b352.js";import"./087AC4D233B64EB0tag.d3c1c3e4.js";import"./087AC4D233B64EB0select.7f5b5538.js";import"./087AC4D233B64EB0scrollbar.3894915f.js";/* empty css                               */import{E as D,a as E}from"./087AC4D233B64EB0table-column.e9b4a870.js";import"./087AC4D233B64EB0checkbox.a3853383.js";/* empty css                                *//* empty css                               */import{_ as g}from"./087AC4D233B64EB0warningBar.beb718a3.js";import{f as j}from"./087AC4D233B64EB0format.9823c1e6.js";import"./087AC4D233B64EB0isUndefined.d281c39a.js";import"./087AC4D233B64EB0castArray.209ac14b.js";import"./087AC4D233B64EB0_baseClone.a73122b0.js";import"./087AC4D233B64EB0_Uint8Array.02b83471.js";import"./087AC4D233B64EB0_initCloneObject.0c0ca3ea.js";import"./087AC4D233B64EB0isEqual.e024b3a6.js";import"./087AC4D233B64EB0hasIn.9f12b2a1.js";import"./087AC4D233B64EB0index.d8bfc0de.js";import"./087AC4D233B64EB0index.5d58b83c.js";import"./087AC4D233B64EB0strings.2df7e9e1.js";import"./087AC4D233B64EB0debounce.0aab18a9.js";import"./087AC4D233B64EB0date.225eaf4f.js";import"./087AC4D233B64EB0dictionary.2d6433e1.js";import"./087AC4D233B64EB0sysDictionary.e0472ec6.js";const A=a=>e({url:"/customer/customer",method:"post",data:a}),h={class:"gva-table-box"},y={class:"gva-btn-list"},b={class:"gva-pagination"},w={class:"dialog-footer"},_=Object.assign({name:"Customer"},{__name:"customer",setup(_){const k=a({customerName:"",customerPhoneData:""}),z=a(1),x=a(0),V=a(10),I=a([]),P=e=>{V.value=e,N()},U=e=>{z.value=e,N()},N=async()=>{const a=await(t={page:z.value,pageSize:V.value},e({url:"/customer/customerList",method:"get",params:t}));var t;0===a.code&&(I.value=a.data.list,x.value=a.data.total,z.value=a.data.page,V.value=a.data.pageSize)};N();const S=a(!1),T=a(""),q=async a=>{const t=await(l={ID:a.ID},e({url:"/customer/customer",method:"get",params:l}));var l;T.value="update",0===t.code&&(k.value=t.data.customer,S.value=!0)},O=()=>{S.value=!1,k.value={customerName:"",customerPhoneData:""}},K=async a=>{n.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{var t;0===(await(t={ID:a.ID},e({url:"/customer/customer",method:"delete",data:t}))).code&&(p({type:"success",message:"删除成功"}),1===I.value.length&&z.value>1&&z.value--,N())}))},L=async()=>{let a;switch(T.value){case"create":default:a=await A(k.value);break;case"update":a=await(t=k.value,e({url:"/customer/customer",method:"put",data:t}))}var t;0===a.code&&(O(),N())},$=()=>{T.value="create",S.value=!0};return(e,a)=>{const n=c,p=D,A=E,_=f,N=d,T=v,F=C,G=B;return t(),l("div",null,[o(g,{title:"在资源权限中将此角色的资源权限清空 或者不包含创建者的角色 即可屏蔽此客户资源的显示"}),s("div",h,[s("div",y,[o(n,{type:"primary",icon:"plus",size:"small",onClick:$},{default:r((()=>[i("新增")])),_:1})]),o(A,{ref:"multipleTable",data:I.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID"},{default:r((()=>[o(p,{type:"selection",width:"55"}),o(p,{align:"left",label:"接入日期",width:"180"},{default:r((e=>[s("span",null,u(m(j)(e.row.CreatedAt)),1)])),_:1}),o(p,{align:"left",label:"姓名",prop:"customerName",width:"120"}),o(p,{align:"left",label:"电话",prop:"customerPhoneData",width:"120"}),o(p,{align:"left",label:"接入人ID",prop:"sysUserId",width:"120"}),o(p,{align:"left",label:"操作","min-width":"160"},{default:r((e=>[o(n,{type:"primary",link:"",icon:"edit",size:"small",onClick:a=>q(e.row)},{default:r((()=>[i("变更")])),_:2},1032,["onClick"]),o(n,{type:"primary",link:"",icon:"delete",size:"small",onClick:a=>K(e.row)},{default:r((()=>[i("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),s("div",b,[o(_,{"current-page":z.value,"page-size":V.value,"page-sizes":[10,30,50,100],total:x.value,small:"",layout:"total, sizes, prev, pager, next",onCurrentChange:U,onSizeChange:P},null,8,["current-page","page-size","total"])])]),o(G,{modelValue:S.value,"onUpdate:modelValue":a[2]||(a[2]=e=>S.value=e),"before-close":O,title:"客户"},{footer:r((()=>[s("div",w,[o(n,{size:"small",onClick:O},{default:r((()=>[i("取 消")])),_:1}),o(n,{type:"primary",size:"small",onClick:L},{default:r((()=>[i("确 定")])),_:1})])])),default:r((()=>[o(F,{inline:!0,model:k.value,"label-width":"80px"},{default:r((()=>[o(T,{label:"客户名"},{default:r((()=>[o(N,{modelValue:k.value.customerName,"onUpdate:modelValue":a[0]||(a[0]=e=>k.value.customerName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),o(T,{label:"客户电话"},{default:r((()=>[o(N,{modelValue:k.value.customerPhoneData,"onUpdate:modelValue":a[1]||(a[1]=e=>k.value.customerPhoneData=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{_ as default};
