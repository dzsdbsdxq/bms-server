/*! 
 Build based on gin-vue-admin 
 Time : 1717039643000 */
import{l as a,r as t,o as e,c as i,b as l,d as n,w as s,i as o,t as r,D as p,g as c,P as m,E as d,k as u}from"./087AC4D233B64EB0index.39f1eb31.js";import{E as B}from"./087AC4D233B64EB0pagination.ce43b352.js";/* empty css                              */import"./087AC4D233B64EB0tag.d3c1c3e4.js";import"./087AC4D233B64EB0select.7f5b5538.js";import"./087AC4D233B64EB0scrollbar.3894915f.js";/* empty css                               */import{E as f,a as C}from"./087AC4D233B64EB0table-column.e9b4a870.js";import"./087AC4D233B64EB0checkbox.a3853383.js";/* empty css                                *//* empty css                               */import{f as g,h as y,r as D}from"./087AC4D233B64EB0autoCode.2e981990.js";import{f as E}from"./087AC4D233B64EB0format.9823c1e6.js";import{E as b}from"./087AC4D233B64EB0index.5d58b83c.js";import"./087AC4D233B64EB0isEqual.e024b3a6.js";import"./087AC4D233B64EB0_Uint8Array.02b83471.js";import"./087AC4D233B64EB0hasIn.9f12b2a1.js";import"./087AC4D233B64EB0index.d8bfc0de.js";import"./087AC4D233B64EB0isUndefined.d281c39a.js";import"./087AC4D233B64EB0strings.2df7e9e1.js";import"./087AC4D233B64EB0debounce.0aab18a9.js";import"./087AC4D233B64EB0_initCloneObject.0c0ca3ea.js";import"./087AC4D233B64EB0date.225eaf4f.js";import"./087AC4D233B64EB0dictionary.2d6433e1.js";import"./087AC4D233B64EB0sysDictionary.e0472ec6.js";const A={class:"gva-table-box"},j={class:"gva-btn-list"},w={class:"gva-pagination"},v=Object.assign({name:"AutoCodeAdmin"},{__name:"index",setup(v){const h=a(),k=t(1),x=t(0),_=t(10),z=t([]),T=a=>{_.value=a,I()},N=a=>{k.value=a,I()},I=async()=>{const a=await g({page:k.value,pageSize:_.value});0===a.code&&(z.value=a.data.list,x.value=a.data.total,k.value=a.data.page,_.value=a.data.pageSize)};I();const S=async(a,t)=>{t?m.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{m.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 请继续确认！！！","会删除表",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{m.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 请继续确认！！！","会删除表",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await D({id:Number(a.ID),deleteTable:t})).code&&(d.success("回滚成功"),I())}))}))})):m.confirm("此操作将删除自动创建的文件和api, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await D({id:Number(a.ID),deleteTable:t})).code&&(d.success("回滚成功"),I())}))},U=a=>{a?h.push({name:"autoCodeEdit",params:{id:a.ID}}):h.push({name:"autoCode"})};return(a,t)=>{const g=u,D=f,v=b,h=C,q=B;return e(),i("div",null,[l("div",A,[l("div",j,[n(g,{type:"primary",size:"small",icon:"plus",onClick:t[0]||(t[0]=a=>U(null))},{default:s((()=>[o("新增")])),_:1})]),n(h,{data:z.value},{default:s((()=>[n(D,{type:"selection",width:"55"}),n(D,{align:"left",label:"id",width:"60",prop:"ID"}),n(D,{align:"left",label:"日期",width:"180"},{default:s((a=>[o(r(p(E)(a.row.CreatedAt)),1)])),_:1}),n(D,{align:"left",label:"结构体名","min-width":"150",prop:"structName"}),n(D,{align:"left",label:"结构体描述","min-width":"150",prop:"structCNName"}),n(D,{align:"left",label:"表名称","min-width":"150",prop:"tableName"}),n(D,{align:"left",label:"回滚标记","min-width":"150",prop:"flag"},{default:s((a=>[a.row.flag?(e(),c(v,{key:0,type:"danger",effect:"dark"},{default:s((()=>[o(" 已回滚 ")])),_:1})):(e(),c(v,{key:1,type:"success",effect:"dark"},{default:s((()=>[o(" 未回滚 ")])),_:1}))])),_:1}),n(D,{align:"left",label:"操作","min-width":"240"},{default:s((a=>[l("div",null,[n(g,{type:"primary",link:"",size:"small",disabled:1===a.row.flag,onClick:t=>S(a.row,!0)},{default:s((()=>[o("回滚(删表)")])),_:2},1032,["disabled","onClick"]),n(g,{type:"primary",link:"",size:"small",disabled:1===a.row.flag,onClick:t=>S(a.row,!1)},{default:s((()=>[o("回滚(不删表)")])),_:2},1032,["disabled","onClick"]),n(g,{type:"primary",link:"",size:"small",onClick:t=>U(a.row)},{default:s((()=>[o("复用")])),_:2},1032,["onClick"]),n(g,{type:"primary",link:"",size:"small",onClick:t=>(async a=>{m.confirm("此操作将删除本历史, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await y({id:Number(a.ID)})).code&&(d.success("删除成功"),I())}))})(a.row)},{default:s((()=>[o("删除")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),l("div",w,[n(q,{"current-page":k.value,"page-size":_.value,"page-sizes":[10,30,50,100],total:x.value,small:"",layout:"total, sizes, prev, pager, next",onCurrentChange:N,onSizeChange:T},null,8,["current-page","page-size","total"])])])])}}});export{v as default};
