/*! 
 Build based on gin-vue-admin 
 Time : 1717039643000 */
import{r as e,a,M as l,o as t,c as s,d as o,b as i,w as r,i as u,e as d,t as n,D as p,F as m,m as c,g as v,h as B,P as f,E as y,j as C,k as g,q as E}from"./087AC4D233B64EB0index.39f1eb31.js";import{E as A}from"./087AC4D233B64EB0dialog.c75a9340.js";import"./087AC4D233B64EB0overlay.3905897c.js";import{E as D}from"./087AC4D233B64EB0switch.5bfb00d1.js";import{E as b}from"./087AC4D233B64EB0pagination.ce43b352.js";/* empty css                              */import"./087AC4D233B64EB0tag.d3c1c3e4.js";import"./087AC4D233B64EB0select.7f5b5538.js";import"./087AC4D233B64EB0scrollbar.3894915f.js";/* empty css                               */import{E as j,a as w}from"./087AC4D233B64EB0table-column.e9b4a870.js";import"./087AC4D233B64EB0checkbox.a3853383.js";/* empty css                                */import{a as h,E as _}from"./087AC4D233B64EB0form-item.a86c41d2.js";/* empty css                               */import{g as x,d as k,f as V,a as I,c as z,u as T}from"./087AC4D233B64EB0sysExtends.dfcbbd7f.js";import{_ as U}from"./087AC4D233B64EB0warningBar.beb718a3.js";import{b as P,f as S}from"./087AC4D233B64EB0format.9823c1e6.js";import F from"./087AC4D233B64EB0sysExtendsDetails.597f5b37.js";import{E as q}from"./087AC4D233B64EB0index.5d58b83c.js";import{a as K,b as O}from"./087AC4D233B64EB0index.8fd65b4f.js";import"./087AC4D233B64EB0isUndefined.d281c39a.js";import"./087AC4D233B64EB0isEqual.e024b3a6.js";import"./087AC4D233B64EB0_Uint8Array.02b83471.js";import"./087AC4D233B64EB0hasIn.9f12b2a1.js";import"./087AC4D233B64EB0index.d8bfc0de.js";import"./087AC4D233B64EB0strings.2df7e9e1.js";import"./087AC4D233B64EB0debounce.0aab18a9.js";import"./087AC4D233B64EB0_initCloneObject.0c0ca3ea.js";import"./087AC4D233B64EB0castArray.209ac14b.js";import"./087AC4D233B64EB0_baseClone.a73122b0.js";import"./087AC4D233B64EB0date.225eaf4f.js";import"./087AC4D233B64EB0dictionary.2d6433e1.js";import"./087AC4D233B64EB0sysDictionary.e0472ec6.js";import"./087AC4D233B64EB0sysExtendsDetails.3d67246c.js";import"./087AC4D233B64EB0index.0dabe5ab.js";import"./087AC4D233B64EB0drawer.ae3d541f.js";import"./087AC4D233B64EB0image-viewer.9c6934e5.js";import"./087AC4D233B64EB0common.c541c571.js";import"./087AC4D233B64EB0upload.099811f5.js";import"./087AC4D233B64EB0progress.65ec04e5.js";import"./087AC4D233B64EB0cloneDeep.5b0b6a51.js";import"./087AC4D233B64EB0stringFun.24b05cf5.js";const R={class:"gva-search-box"},H={class:"gva-table-box"},M={class:"gva-btn-list"},N={class:"gva-pagination"},Q={class:"flex items-center justify-between"},$=Object.assign({name:"SysExtends"},{__name:"sysExtends",setup($){const G=e([{label:"文本",value:"text"},{label:"数组",value:"array"},{label:"坐标点",value:"gps"}]),J=e({appid:"",name:"",type:"",status:!1,desc:"",d_type:"text"}),L=e(!1),W=a({}),X=a({createdAt:[{validator:(e,a,l)=>{se.value.startCreatedAt&&!se.value.endCreatedAt?l(new Error("请填写结束日期")):!se.value.startCreatedAt&&se.value.endCreatedAt?l(new Error("请填写开始日期")):se.value.startCreatedAt&&se.value.endCreatedAt&&(se.value.startCreatedAt.getTime()===se.value.endCreatedAt.getTime()||se.value.startCreatedAt.getTime()>se.value.endCreatedAt.getTime())?l(new Error("开始日期应当早于结束日期")):l()},trigger:"change"}]}),Y=e(),Z=e(),ee=e(1),ae=e(0),le=e(10),te=e([]),se=e({}),oe=()=>{se.value={},de()},ie=()=>{var e;null==(e=Z.value)||e.validate((async e=>{e&&(ee.value=1,le.value=10,""===se.value.status&&(se.value.status=null),de())}))},re=e=>{le.value=e,de()},ue=e=>{ee.value=e,de()},de=async()=>{const e=await x({page:ee.value,pageSize:le.value,...se.value});0===e.code&&(te.value=e.data.list,ae.value=e.data.total,ee.value=e.data.page,le.value=e.data.pageSize)};de();(async()=>{})();const ne=e([]),pe=e=>{ne.value=e},me=async()=>{f.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=[];if(0===ne.value.length)return void y({type:"warning",message:"请选择要删除的数据"});ne.value&&ne.value.map((a=>{e.push(a.ID)}));0===(await k({IDs:e})).code&&(y({type:"success",message:"删除成功"}),te.value.length===e.length&&ee.value>1&&ee.value--,de())}))},ce=e(""),ve=async e=>{0===(await I({ID:e.ID})).code&&(y({type:"success",message:"删除成功"}),1===te.value.length&&ee.value>1&&ee.value--,de())},Be=a({id:0,appId:"",dType:"text"}),fe=e(!1),ye=()=>{ce.value="create",fe.value=!0},Ce=()=>{fe.value=!1,J.value={appid:"",name:"",type:"",status:!1,desc:""}},ge=()=>{L.value=!1},Ee=async()=>{var e;null==(e=Y.value)||e.validate((async e=>{if(!e)return;let a;switch(ce.value){case"create":default:a=await z(J.value);break;case"update":a=await T(J.value)}0===a.code&&(y({type:"success",message:"创建/更改成功"}),Ce(),de())}))};return(e,a)=>{const y=C,x=h,k=g,I=_,z=j,T=q,$=l("Expand"),de=E,Ae=w,De=b,be=K,je=O,we=D,he=A;return t(),s("div",null,[o(U,{title:"接口调用：https://www.sztv.com.cn/ysztv/web/extends/get?appId="}),i("div",R,[o(I,{ref_key:"elSearchFormRef",ref:Z,inline:!0,model:se.value,class:"demo-form-inline",rules:X,onKeyup:d(ie,["enter"])},{default:r((()=>[o(x,{label:"APPID",prop:"appId"},{default:r((()=>[o(y,{modelValue:se.value.appId,"onUpdate:modelValue":a[0]||(a[0]=e=>se.value.appId=e),placeholder:"APPID",clearable:"",size:"small"},null,8,["modelValue"])])),_:1}),o(x,null,{default:r((()=>[o(k,{type:"primary",icon:"search",size:"small",onClick:ie},{default:r((()=>[u("查询")])),_:1}),o(k,{icon:"refresh",size:"small",onClick:oe},{default:r((()=>[u("重置")])),_:1})])),_:1})])),_:1},8,["model","rules"])]),i("div",H,[i("div",M,[o(k,{type:"primary",icon:"plus",size:"small",onClick:ye},{default:r((()=>[u("新增")])),_:1}),o(k,{icon:"delete",style:{"margin-left":"10px"},size:"small",disabled:!ne.value.length,onClick:me},{default:r((()=>[u("删除")])),_:1},8,["disabled"])]),o(Ae,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:te.value,"row-key":"ID",onSelectionChange:pe},{default:r((()=>[o(z,{type:"selection",width:"55"}),o(z,{align:"left",label:"APPID",prop:"appid",width:"150"}),o(z,{align:"left",label:"扩展名（中）",prop:"name",width:"150"}),o(z,{align:"left",label:"扩展名（英）",prop:"type",width:"120"}),o(z,{align:"left",label:"状态",prop:"status",width:"120"},{default:r((e=>[o(T,{type:1==e.row.status?"primary":"warning"},{default:r((()=>[u(n(p(P)(e.row.status)),1)])),_:2},1032,["type"])])),_:1}),o(z,{align:"left",label:"描述",prop:"desc",width:"120"}),o(z,{align:"left",label:"日期",width:"180"},{default:r((e=>[u(n(p(S)(e.row.CreatedAt)),1)])),_:1}),o(z,{align:"left",label:"操作",fixed:"right","min-width":"240"},{default:r((e=>[o(k,{type:"primary",link:"",class:"table-button",onClick:a=>{return l=e.row,L.value=!0,Be.id=l.ID,Be.appId=l.appid,void(Be.dType=l.d_type);var l}},{default:r((()=>[o(de,{style:{"margin-right":"5px"}},{default:r((()=>[o($)])),_:1}),u(" 查看详情 ")])),_:2},1032,["onClick"]),o(k,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:a=>(async e=>{const a=await V({ID:e.ID});ce.value="update",0===a.code&&(J.value=a.data.resysExtends,fe.value=!0)})(e.row)},{default:r((()=>[u("变更")])),_:2},1032,["onClick"]),o(k,{type:"primary",link:"",icon:"delete",onClick:a=>{return l=e.row,void f.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{ve(l)}));var l}},{default:r((()=>[u("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),i("div",N,[o(De,{layout:"total, sizes, prev, pager, next","current-page":ee.value,"page-size":le.value,small:"","page-sizes":[10,30,50,100],total:ae.value,onCurrentChange:ue,onSizeChange:re},null,8,["current-page","page-size","total"])])]),o(he,{modelValue:fe.value,"onUpdate:modelValue":a[6]||(a[6]=e=>fe.value=e),"show-close":!0,width:"40%",title:"create"===ce.value?"添加":"修改","before-close":Ce},{footer:r((()=>[i("div",Q,[i("div",null,[o(k,{type:"primary",size:"small",onClick:Ee},{default:r((()=>[u("确 定")])),_:1}),o(k,{size:"small",onClick:Ce},{default:r((()=>[u("取 消")])),_:1})])])])),default:r((()=>[o(I,{ref_key:"elFormRef",ref:Y,model:J.value,"label-position":"top",rules:W,"label-width":"80px"},{default:r((()=>[o(x,{label:"字典名（中）:",prop:"name"},{default:r((()=>[o(y,{modelValue:J.value.name,"onUpdate:modelValue":a[1]||(a[1]=e=>J.value.name=e),clearable:!0,placeholder:"请输入字典名（中）"},null,8,["modelValue"])])),_:1}),o(x,{label:"字典名（英）:",prop:"type"},{default:r((()=>[o(y,{modelValue:J.value.type,"onUpdate:modelValue":a[2]||(a[2]=e=>J.value.type=e),clearable:!0,placeholder:"请输入字典名（英）"},null,8,["modelValue"])])),_:1}),o(x,{label:"描述:",prop:"desc"},{default:r((()=>[o(y,{modelValue:J.value.desc,"onUpdate:modelValue":a[3]||(a[3]=e=>J.value.desc=e),clearable:!0,type:"textarea",placeholder:"请输入描述"},null,8,["modelValue"])])),_:1}),o(x,{label:"类型",props:"d_type"},{default:r((()=>[o(je,{modelValue:J.value.d_type,"onUpdate:modelValue":a[4]||(a[4]=e=>J.value.d_type=e),size:"small"},{default:r((()=>[(t(!0),s(m,null,c(G.value,((e,a)=>(t(),v(be,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),o(x,{label:"状态:",prop:"status"},{default:r((()=>[o(we,{modelValue:J.value.status,"onUpdate:modelValue":a[5]||(a[5]=e=>J.value.status=e),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"启用","inactive-text":"停用",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"]),o(he,{modelValue:L.value,"onUpdate:modelValue":a[7]||(a[7]=e=>L.value=e),"show-close":!0,width:"70%",title:"查看字典值","before-close":ge},{default:r((()=>[L.value?(t(),v(F,{key:0,"extend-id":Be.id,"app-id":Be.appId,"d-type":Be.dType},null,8,["extend-id","app-id","d-type"])):B("",!0)])),_:1},8,["modelValue"])])}}});export{$ as default};
