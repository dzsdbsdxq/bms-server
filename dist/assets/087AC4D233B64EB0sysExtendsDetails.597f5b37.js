/*! 
 Build based on gin-vue-admin 
 Time : 1717039643000 */
import{r as e,o as a,c as l,b as t,d as s,w as d,i as o,t as r,D as u,g as i,h as n,F as p,m,aI as c,aH as v,P as y,E as B,k as f,j as g}from"./087AC4D233B64EB0index.39f1eb31.js";import{E as b}from"./087AC4D233B64EB0dialog.c75a9340.js";import"./087AC4D233B64EB0overlay.3905897c.js";import{a as D,E as C}from"./087AC4D233B64EB0form-item.a86c41d2.js";import{E}from"./087AC4D233B64EB0switch.5bfb00d1.js";import{E as V}from"./087AC4D233B64EB0pagination.ce43b352.js";/* empty css                              */import"./087AC4D233B64EB0tag.d3c1c3e4.js";import"./087AC4D233B64EB0select.7f5b5538.js";import"./087AC4D233B64EB0scrollbar.3894915f.js";/* empty css                               */import{E as h,a as x}from"./087AC4D233B64EB0table-column.e9b4a870.js";import"./087AC4D233B64EB0checkbox.a3853383.js";/* empty css                                *//* empty css                               */import{g as j,d as k,f as A,a as w,c as _,u as I}from"./087AC4D233B64EB0sysExtendsDetails.3d67246c.js";import{b as U}from"./087AC4D233B64EB0format.9823c1e6.js";import{_ as z}from"./087AC4D233B64EB0index.0dabe5ab.js";import{g as P}from"./087AC4D233B64EB0stringFun.24b05cf5.js";import{E as T}from"./087AC4D233B64EB0index.5d58b83c.js";import"./087AC4D233B64EB0isUndefined.d281c39a.js";import"./087AC4D233B64EB0castArray.209ac14b.js";import"./087AC4D233B64EB0_baseClone.a73122b0.js";import"./087AC4D233B64EB0_Uint8Array.02b83471.js";import"./087AC4D233B64EB0_initCloneObject.0c0ca3ea.js";import"./087AC4D233B64EB0isEqual.e024b3a6.js";import"./087AC4D233B64EB0hasIn.9f12b2a1.js";import"./087AC4D233B64EB0index.d8bfc0de.js";import"./087AC4D233B64EB0strings.2df7e9e1.js";import"./087AC4D233B64EB0debounce.0aab18a9.js";import"./087AC4D233B64EB0date.225eaf4f.js";import"./087AC4D233B64EB0dictionary.2d6433e1.js";import"./087AC4D233B64EB0sysDictionary.e0472ec6.js";import"./087AC4D233B64EB0drawer.ae3d541f.js";import"./087AC4D233B64EB0image-viewer.9c6934e5.js";import"./087AC4D233B64EB0common.c541c571.js";import"./087AC4D233B64EB0upload.099811f5.js";import"./087AC4D233B64EB0progress.65ec04e5.js";import"./087AC4D233B64EB0cloneDeep.5b0b6a51.js";const L={class:"gva-table-box"},N={class:"gva-btn-list"},S={class:"gva-pagination"},F={class:"flex items-center justify-between"},O={class:"text-lg"},J={key:0},K={class:"flex items-center justify-between"},q=t("span",null,"值(value):",-1),H={key:1},Q={key:2,style:{"margin-bottom":"10px"}},R=Object.assign({name:"SysExtendsDetails"},{__name:"sysExtendsDetails",props:{extendId:{type:Number,default:0},appId:{type:String,default:""},dType:{type:String,default:""}},setup(R){const $=R,G=e([{id:P(32),name:"",key:"",value:""}]),M=e({addressId:"",addressName:"",addressLng:"",addressLat:"",addressPoint:"",addressPoster:""}),W=e({label:"",key:"",value:"",status:!0,sort:0,sysExtendsId:$.extendId,appId:$.appId}),X=e(),Y=e(1),Z=e(0),ee=e(10),ae=e([]),le=e({}),te=e=>{ee.value=e,de()},se=e=>{Y.value=e,de()},de=async()=>{const e=await j({sysExtendsID:$.extendId,page:Y.value,pageSize:ee.value,...le.value});0===e.code&&(ae.value=e.data.list,Z.value=e.data.total,Y.value=e.data.page,ee.value=e.data.pageSize)};de();(async()=>{})();const oe=e([]),re=e=>{oe.value=e},ue=async()=>{y.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=[];if(0===oe.value.length)return void B({type:"warning",message:"请选择要删除的数据"});oe.value&&oe.value.map((a=>{e.push(a.ID)}));0===(await k({IDs:e})).code&&(B({type:"success",message:"删除成功"}),ae.value.length===e.length&&Y.value>1&&Y.value--,de())}))},ie=e(""),ne=async e=>{0===(await w({ID:e.ID})).code&&(B({type:"success",message:"删除成功"}),1===ae.value.length&&Y.value>1&&Y.value--,de())},pe=e(!1),me=()=>{ie.value="create",pe.value=!0,M.value.addressId="",M.value.addressName="",M.value.addressLng="",M.value.addressLat="",M.value.addressPoint="",M.value.addressPoster="",G.value=[{id:P(32),name:"",key:"",value:""}]},ce=()=>{pe.value=!1,W.value={label:"",key:"",value:"",status:!1,sort:0,sysExtendsId:$.extendId,appId:$.appId}},ve=async()=>{var e;null==(e=X.value)||e.validate((async e=>{if(!e)return;let a;switch("gps"===$.dType?W.value.value=JSON.stringify(M.value):"array"===$.dType&&(W.value.value=JSON.stringify(G.value)),ie.value){case"create":default:a=await _(W.value);break;case"update":a=await I(W.value)}0===a.code&&(B({type:"success",message:"创建/更改成功"}),ce(),de())}))},ye=e(null),Be=()=>{ye.value.open()};return(e,B)=>{const j=f,k=h,w=g,_=T,I=x,le=V,de=D,fe=E,ge=C,be=b;return a(),l("div",null,[t("div",L,[t("div",N,[s(j,{type:"primary",icon:"plus",size:"small",onClick:me},{default:d((()=>[o("新增")])),_:1}),s(j,{icon:"delete",style:{"margin-left":"10px"},size:"small",disabled:!oe.value.length,onClick:ue},{default:d((()=>[o("删除")])),_:1},8,["disabled"])]),s(I,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:ae.value,"row-key":"ID",onSelectionChange:re},{default:d((()=>[s(k,{type:"selection",width:"55"}),s(k,{align:"left",label:"名称",prop:"label",width:"120"}),s(k,{align:"left",label:"键",prop:"key",width:"120"}),s(k,{align:"left",label:"值",prop:"value",width:"350"},{default:d((e=>[s(w,{modelValue:e.row.value,"onUpdate:modelValue":a=>e.row.value=a,style:{width:"240px"},size:"small",disabled:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),s(k,{align:"left",label:"启用状态",prop:"status",width:"120"},{default:d((e=>[s(_,{type:1==e.row.status?"primary":"warning"},{default:d((()=>[o(r(u(U)(e.row.status)),1)])),_:2},1032,["type"])])),_:1}),s(k,{align:"left",label:"操作",fixed:"right","min-width":"100"},{default:d((e=>[s(j,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:a=>(async e=>{const a=await A({ID:e.ID});if(ie.value="update",0===a.code)if(W.value=a.data.reSysExtendsDetail,console.log(a.data),pe.value=!0,"gps"===$.dType){const e=JSON.parse(W.value.value);M.value.addressId=e.addressId,M.value.addressName=e.addressName,M.value.addressLng=e.addressLng,M.value.addressLat=e.addressLat,M.value.addressPoint=e.addressPoint,M.value.addressPoster=e.addressPoster}else"array"===$.dType&&(G.value=JSON.parse(W.value.value))})(e.row)},{default:d((()=>[o("变更")])),_:2},1032,["onClick"]),s(j,{type:"primary",link:"",icon:"delete",onClick:a=>{return l=e.row,void y.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{ne(l)}));var l}},{default:d((()=>[o("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),t("div",S,[s(le,{layout:"total, sizes, prev, pager, next","current-page":Y.value,"page-size":ee.value,"page-sizes":[10,30,50,100],total:Z.value,small:"",onCurrentChange:se,onSizeChange:te},null,8,["current-page","page-size","total"])])]),s(be,{modelValue:pe.value,"onUpdate:modelValue":B[10]||(B[10]=e=>pe.value=e),size:"800","show-close":!1,"before-close":ce},{header:d((()=>[t("div",F,[t("span",O,r("create"===ie.value?"添加字典值":"修改字典值"),1),t("div",null,[s(j,{type:"primary",size:"small",onClick:ve},{default:d((()=>[o("确 定")])),_:1}),s(j,{size:"small",onClick:ce},{default:d((()=>[o("取 消")])),_:1})])])])),default:d((()=>[s(ge,{ref_key:"elFormRef",ref:X,model:W.value,"label-position":"top","label-width":"80px"},{default:d((()=>[s(de,{label:"名称:",prop:"label"},{default:d((()=>[s(w,{modelValue:W.value.label,"onUpdate:modelValue":B[0]||(B[0]=e=>W.value.label=e),clearable:!0,placeholder:"请输入名称"},null,8,["modelValue"])])),_:1}),s(de,{label:"键(Key):",prop:"key"},{default:d((()=>[s(w,{modelValue:W.value.key,"onUpdate:modelValue":B[1]||(B[1]=e=>W.value.key=e),clearable:!0,placeholder:"请输入键(Key)"},null,8,["modelValue"])])),_:1}),"text"==R.dType?(a(),l("div",J,["text"==R.dType?(a(),i(de,{key:0,prop:"value"},{label:d((()=>[t("div",K,[q,s(j,{type:"info",icon:"plus",size:"small",onClick:Be},{default:d((()=>[o("媒体库")])),_:1}),s(z,{ref_key:"chooseThumbUrl",ref:ye,target:W.value,"target-key":"value"},null,8,["target"])])])),default:d((()=>[s(w,{modelValue:W.value.value,"onUpdate:modelValue":B[2]||(B[2]=e=>W.value.value=e),clearable:!0,type:"textarea",placeholder:"请输入值(value)"},null,8,["modelValue"])])),_:1})):n("",!0)])):n("",!0),"gps"==R.dType?(a(),l("div",H,[s(de,{label:"地点ID:",prop:"gpsFormData.addressId"},{default:d((()=>[s(w,{modelValue:M.value.addressId,"onUpdate:modelValue":B[3]||(B[3]=e=>M.value.addressId=e),clearable:!0,placeholder:"请输入地点ID"},null,8,["modelValue"])])),_:1}),s(de,{label:"地点名称:",prop:"gpsFormData.addressName"},{default:d((()=>[s(w,{modelValue:M.value.addressName,"onUpdate:modelValue":B[4]||(B[4]=e=>M.value.addressName=e),clearable:!0,placeholder:"请输入地点名称"},null,8,["modelValue"])])),_:1}),s(de,{label:"地点详细地址:",prop:"gpsFormData.addressPoint"},{default:d((()=>[s(w,{modelValue:M.value.addressPoint,"onUpdate:modelValue":B[5]||(B[5]=e=>M.value.addressPoint=e),clearable:!0,placeholder:"请输入地点详细地址"},null,8,["modelValue"])])),_:1}),s(de,{label:"地点缩略图:",prop:"gpsFormData.addressPoster"},{default:d((()=>[s(w,{modelValue:M.value.addressPoster,"onUpdate:modelValue":B[6]||(B[6]=e=>M.value.addressPoster=e),clearable:!0,placeholder:"请输入地点缩略图"},null,8,["modelValue"])])),_:1}),s(de,{label:"地点经纬度:",prop:"gpsFormData.addressLat"},{default:d((()=>[s(w,{modelValue:M.value.addressLng,"onUpdate:modelValue":B[7]||(B[7]=e=>M.value.addressLng=e),clearable:!0,style:{width:"150px"},placeholder:"请输入地点经度"},null,8,["modelValue"]),o(" - "),s(w,{modelValue:M.value.addressLat,"onUpdate:modelValue":B[8]||(B[8]=e=>M.value.addressLat=e),clearable:!0,style:{width:"150px"},placeholder:"请输入地点纬度"},null,8,["modelValue"])])),_:1})])):n("",!0),"array"==R.dType?(a(),l("div",Q,[(a(!0),l(p,null,m(G.value,((e,t)=>(a(),l("div",{key:t,style:{"margin-bottom":"10px"}},[s(w,{modelValue:e.name,"onUpdate:modelValue":a=>e.name=a,clearable:!0,style:{width:"150px"},placeholder:"请输入名称"},null,8,["modelValue","onUpdate:modelValue"]),s(w,{modelValue:e.key,"onUpdate:modelValue":a=>e.key=a,clearable:!0,style:{width:"150px","margin-left":"10px"},placeholder:"请输入Key"},null,8,["modelValue","onUpdate:modelValue"]),s(w,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,clearable:!0,style:{width:"250px","margin-left":"10px"},placeholder:"请输入Value"},null,8,["modelValue","onUpdate:modelValue"]),s(j,{type:"success",style:{"margin-left":"10px"},icon:u(c),size:"small",onClick:e=>{G.value.push({id:P(32),name:"",key:"",value:""})}},null,8,["icon","onClick"]),0!=t?(a(),i(j,{key:0,style:{"margin-left":"10px"},type:"danger",icon:u(v),size:"small",onClick:e=>(e=>{G.value.splice(e,1)})(t)},null,8,["icon","onClick"])):n("",!0)])))),128))])):n("",!0),s(de,{label:"启用状态:",prop:"status"},{default:d((()=>[s(fe,{modelValue:W.value.status,"onUpdate:modelValue":B[9]||(B[9]=e=>W.value.status=e),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"启用","inactive-text":"停用",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{R as default};
