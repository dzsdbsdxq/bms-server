/*! 
 Build based on gin-vue-admin 
 Time : 1717039643000 */
import{r as e,o as a,g as t,w as l,b as s,d as o,i as r,c as n,F as i,m as u,D as m,t as c,P as p,E as d,j as g,k as v,q as B}from"./087AC4D233B64EB0index.39f1eb31.js";import{E as y}from"./087AC4D233B64EB0drawer.ae3d541f.js";import"./087AC4D233B64EB0overlay.3905897c.js";import{E as C}from"./087AC4D233B64EB0pagination.ce43b352.js";/* empty css                              */import"./087AC4D233B64EB0tag.d3c1c3e4.js";import"./087AC4D233B64EB0select.7f5b5538.js";import"./087AC4D233B64EB0scrollbar.3894915f.js";/* empty css                               */import{E as f}from"./087AC4D233B64EB0image-viewer.9c6934e5.js";import{a as E,E as j}from"./087AC4D233B64EB0form-item.a86c41d2.js";/* empty css                               */import{_ as D,a as b,g as x,e as A}from"./087AC4D233B64EB0common.c541c571.js";const _={class:"gva-btn-list"},k={class:"media"},h={class:"header-img-box-list"},w={class:"header-img-box-list"},z=s("picture",null,null,-1),S=["onClick"],V={__name:"index",props:{target:{type:Object,default:null},targetKey:{type:String,default:""}},emits:["enterImg"],setup(V,{expose:O,emit:F}){const I=e(""),K=e({}),P=e(1),T=e(0),U=e(20),q=e=>{U.value=e,J()},M=e=>{P.value=e,J()},$=F,G=e(!1),H=e([]),J=async()=>{const e=await x({page:P.value,pageSize:U.value,...K.value});0===e.code&&(H.value=e.data.list,T.value=e.data.total,P.value=e.data.page,U.value=e.data.pageSize,G.value=!0)};return O({open:J}),(e,x)=>{const O=g,F=E,L=v,N=j,Q=B,R=f,W=C,X=y;return a(),t(X,{modelValue:G.value,"onUpdate:modelValue":x[1]||(x[1]=e=>G.value=e),title:"媒体库",size:"650px"},{default:l((()=>[s("div",_,[o(D,{"image-common":I.value,class:"upload-btn-media-library",onOnSuccess:J},null,8,["image-common"]),o(D,{"image-common":I.value,"text-tag":"本地上传","btn-type":"warning",engine:"sztv",onOnSuccess:J},null,8,["image-common"]),o(N,{ref:"searchForm",inline:!0,model:K.value},{default:l((()=>[o(F,{label:""},{default:l((()=>[o(O,{modelValue:K.value.keyword,"onUpdate:modelValue":x[0]||(x[0]=e=>K.value.keyword=e),class:"keyword",size:"small",placeholder:"请输入文件名或备注"},null,8,["modelValue"])])),_:1}),o(F,null,{default:l((()=>[o(L,{type:"primary",icon:"search",size:"small",onClick:J},{default:l((()=>[r("查询")])),_:1})])),_:1})])),_:1},8,["model"])]),s("div",k,[(a(!0),n(i,null,u(H.value,((e,r)=>(a(),n("div",{key:r,class:"media-box"},[s("div",h,[(a(),t(R,{key:r,src:m(b)(e.url),onClick:a=>{return t=e.url,l=V.target,s=V.targetKey,l&&s&&(l[s]=t),$("enterImg",t),void(G.value=!1);var t,l,s}},{error:l((()=>[s("div",w,[o(Q,null,{default:l((()=>[z])),_:1})])])),_:2},1032,["src","onClick"]))]),s("div",{class:"img-title",onClick:a=>(async e=>{p.prompt("请输入文件名或者备注","编辑",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"不能为空",inputValue:e.name}).then((async({value:a})=>{e.name=a,0===(await A(e)).code&&(d({type:"success",message:"编辑成功!"}),J())})).catch((()=>{d({type:"info",message:"取消修改"})}))})(e)},c(e.name),9,S)])))),128))]),o(W,{"current-page":P.value,"page-size":U.value,total:T.value,small:"",style:{"justify-content":"center"},layout:"total, prev, pager, next",onCurrentChange:M,onSizeChange:q},null,8,["current-page","page-size","total"])])),_:1},8,["modelValue"])}}};export{V as _};
