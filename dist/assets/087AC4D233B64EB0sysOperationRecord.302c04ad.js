/*! 
 Build based on gin-vue-admin 
 Time : 1717039643000 */
import{K as e,r as a,M as t,o as l,c as s,b as o,d as r,w as i,i as n,t as u,D as p,g as d,P as c,E as m,j as B,k as f,q as v}from"./087AC4D233B64EB0index.39f1eb31.js";import{E as g}from"./087AC4D233B64EB0pagination.ce43b352.js";/* empty css                              */import"./087AC4D233B64EB0tag.d3c1c3e4.js";import"./087AC4D233B64EB0select.7f5b5538.js";import"./087AC4D233B64EB0scrollbar.3894915f.js";/* empty css                               */import{E as y,a as h}from"./087AC4D233B64EB0table-column.e9b4a870.js";import"./087AC4D233B64EB0checkbox.a3853383.js";/* empty css                                */import{E as C}from"./087AC4D233B64EB0popover.0b7da3db.js";import{a as E,E as D}from"./087AC4D233B64EB0form-item.a86c41d2.js";/* empty css                               */import{f as b}from"./087AC4D233B64EB0format.9823c1e6.js";import{E as j}from"./087AC4D233B64EB0index.5d58b83c.js";import"./087AC4D233B64EB0isEqual.e024b3a6.js";import"./087AC4D233B64EB0_Uint8Array.02b83471.js";import"./087AC4D233B64EB0hasIn.9f12b2a1.js";import"./087AC4D233B64EB0index.d8bfc0de.js";import"./087AC4D233B64EB0isUndefined.d281c39a.js";import"./087AC4D233B64EB0strings.2df7e9e1.js";import"./087AC4D233B64EB0debounce.0aab18a9.js";import"./087AC4D233B64EB0_initCloneObject.0c0ca3ea.js";import"./087AC4D233B64EB0dropdown.9d3edc17.js";import"./087AC4D233B64EB0castArray.209ac14b.js";import"./087AC4D233B64EB0_baseClone.a73122b0.js";import"./087AC4D233B64EB0date.225eaf4f.js";import"./087AC4D233B64EB0dictionary.2d6433e1.js";import"./087AC4D233B64EB0sysDictionary.e0472ec6.js";const A={class:"gva-search-box"},w={class:"gva-table-box"},_={class:"gva-btn-list"},k={class:"popover-box"},x={key:1},O={class:"popover-box"},z={key:1},S={class:"gva-pagination"},V=Object.assign({name:"SysOperationRecord"},{__name:"sysOperationRecord",setup(V){const R=a(1),I=a(0),T=a(10),U=a([]),q=a({}),N=()=>{q.value={}},M=()=>{R.value=1,T.value=10,""===q.value.status&&(q.value.status=null),K()},P=e=>{T.value=e,K()},J=e=>{R.value=e,K()},K=async()=>{const a=await(t={page:R.value,pageSize:T.value,...q.value},e({url:"/sysOperationRecord/getSysOperationRecordList",method:"get",params:t}));var t;0===a.code&&(U.value=a.data.list,I.value=a.data.total,R.value=a.data.page,T.value=a.data.pageSize)};K();const L=a([]),$=e=>{L.value=e},F=async()=>{c.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const a=[];L.value&&L.value.forEach((e=>{a.push(e.ID)}));var t;0===(await(t={ids:a},e({url:"/sysOperationRecord/deleteSysOperationRecordByIds",method:"delete",data:t}))).code&&(m({type:"success",message:"删除成功"}),U.value.length===a.length&&R.value>1&&R.value--,K())}))},G=async a=>{c.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{var t;0===(await(t={ID:a.ID},e({url:"/sysOperationRecord/deleteSysOperationRecord",method:"delete",data:t}))).code&&(m({type:"success",message:"删除成功"}),1===U.value.length&&R.value>1&&R.value--,K())}))},H=e=>{try{return JSON.parse(e)}catch(a){return e}};return(e,a)=>{const c=B,m=E,V=f,K=D,Q=y,W=j,X=t("warning"),Y=v,Z=C,ee=h,ae=g;return l(),s("div",null,[o("div",A,[r(K,{inline:!0,model:q.value},{default:i((()=>[r(m,{label:"请求方法"},{default:i((()=>[r(c,{modelValue:q.value.method,"onUpdate:modelValue":a[0]||(a[0]=e=>q.value.method=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),r(m,{label:"请求路径"},{default:i((()=>[r(c,{modelValue:q.value.path,"onUpdate:modelValue":a[1]||(a[1]=e=>q.value.path=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),r(m,{label:"结果状态码"},{default:i((()=>[r(c,{modelValue:q.value.status,"onUpdate:modelValue":a[2]||(a[2]=e=>q.value.status=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),r(m,null,{default:i((()=>[r(V,{type:"primary",icon:"search",size:"small",onClick:M},{default:i((()=>[n("查询")])),_:1}),r(V,{icon:"refresh",size:"small",onClick:N},{default:i((()=>[n("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),o("div",w,[o("div",_,[r(V,{icon:"delete",size:"small",disabled:!L.value.length,onClick:F},{default:i((()=>[n("删除")])),_:1},8,["disabled"])]),r(ee,{ref:"multipleTable",data:U.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID",onSelectionChange:$},{default:i((()=>[r(Q,{align:"left",type:"selection",width:"55"}),r(Q,{align:"left",label:"操作人",width:"140"},{default:i((e=>[o("div",null,u(e.row.user.userName)+"("+u(e.row.user.nickName)+")",1)])),_:1}),r(Q,{align:"left",label:"日期",width:"180"},{default:i((e=>[n(u(p(b)(e.row.CreatedAt)),1)])),_:1}),r(Q,{align:"left",label:"状态码",prop:"status",width:"120"},{default:i((e=>[o("div",null,[r(W,{type:"success"},{default:i((()=>[n(u(e.row.status),1)])),_:2},1024)])])),_:1}),r(Q,{align:"left",label:"请求IP",prop:"ip",width:"120"}),r(Q,{align:"left",label:"请求方法",prop:"method",width:"120"}),r(Q,{align:"left",label:"请求路径",prop:"path",width:"240"}),r(Q,{align:"left",label:"请求",prop:"path",width:"80"},{default:i((e=>[o("div",null,[e.row.body?(l(),d(Z,{key:0,placement:"left-start"},{reference:i((()=>[r(Y,{style:{cursor:"pointer"}},{default:i((()=>[r(X)])),_:1})])),default:i((()=>[o("div",k,[o("pre",null,u(H(e.row.body)),1)])])),_:2},1024)):(l(),s("span",x,"无"))])])),_:1}),r(Q,{align:"left",label:"响应",prop:"path",width:"80"},{default:i((e=>[o("div",null,[e.row.resp?(l(),d(Z,{key:0,placement:"left-start"},{reference:i((()=>[r(Y,{style:{cursor:"pointer"}},{default:i((()=>[r(X)])),_:1})])),default:i((()=>[o("div",O,[o("pre",null,u(H(e.row.resp)),1)])])),_:2},1024)):(l(),s("span",z,"无"))])])),_:1}),r(Q,{align:"left",label:"操作"},{default:i((e=>[r(V,{icon:"delete",type:"primary",link:"",onClick:a=>G(e.row)},{default:i((()=>[n("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),o("div",S,[r(ae,{"current-page":R.value,"page-size":T.value,"page-sizes":[10,30,50,100],total:I.value,small:"",layout:"total, sizes, prev, pager, next",onCurrentChange:J,onSizeChange:P},null,8,["current-page","page-size","total"])])])])}}});export{V as default};
